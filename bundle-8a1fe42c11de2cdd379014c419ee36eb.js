!function(){"use strict";var e,t;(t=e=e||{})[t.CarryBit=1]="CarryBit",t[t.Zero=2]="Zero",t[t.InterruptsDisable=4]="InterruptsDisable",t[t.DecimalMode=8]="DecimalMode",t[t.Break=16]="Break",t[t.Unused=32]="Unused",t[t.Overflow=64]="Overflow",t[t.Negative=128]="Negative";var l,a,o,r,c=e;(a=l=l||{})[a.IMPLIED=0]="IMPLIED",a[a.ACCUMULATOR=1]="ACCUMULATOR",a[a.IMMEDIATE=2]="IMMEDIATE",a[a.ZEROPAGE=3]="ZEROPAGE",a[a.ZEROPAGE_X=4]="ZEROPAGE_X",a[a.ZEROPAGE_Y=5]="ZEROPAGE_Y",a[a.ABSOLUTE=6]="ABSOLUTE",a[a.ABSOLUTE_X=7]="ABSOLUTE_X",a[a.ABSOLUTE_Y=8]="ABSOLUTE_Y",a[a.INDIRECT=9]="INDIRECT",a[a.INDIRECT_X=10]="INDIRECT_X",a[a.INDIRECT_Y=11]="INDIRECT_Y",a[a.RELATIVE=12]="RELATIVE",(r=o=o||{})[r.NOP=0]="NOP",r[r.LDA=1]="LDA",r[r.STA=2]="STA",r[r.LDX=3]="LDX",r[r.STX=4]="STX",r[r.LDY=5]="LDY",r[r.STY=6]="STY",r[r.TAX=7]="TAX",r[r.TAY=8]="TAY",r[r.TXA=9]="TXA",r[r.TYA=10]="TYA",r[r.TXS=11]="TXS",r[r.TSX=12]="TSX",r[r.ADC=13]="ADC",r[r.SBC=14]="SBC",r[r.INX=15]="INX",r[r.INY=16]="INY",r[r.INC=17]="INC",r[r.DEX=18]="DEX",r[r.DEY=19]="DEY",r[r.DEC=20]="DEC",r[r.AND=21]="AND",r[r.ORA=22]="ORA",r[r.EOR=23]="EOR",r[r.ROL=24]="ROL",r[r.ROR=25]="ROR",r[r.ASL=26]="ASL",r[r.LSR=27]="LSR",r[r.BIT=28]="BIT",r[r.CMP=29]="CMP",r[r.CPX=30]="CPX",r[r.CPY=31]="CPY",r[r.JMP=32]="JMP",r[r.JSR=33]="JSR",r[r.RTS=34]="RTS",r[r.RTI=35]="RTI",r[r.BCC=36]="BCC",r[r.BCS=37]="BCS",r[r.BPL=38]="BPL",r[r.BMI=39]="BMI",r[r.BNE=40]="BNE",r[r.BEQ=41]="BEQ",r[r.BVC=42]="BVC",r[r.BVS=43]="BVS",r[r.PHA=44]="PHA",r[r.PHP=45]="PHP",r[r.PLA=46]="PLA",r[r.PLP=47]="PLP",r[r.CLC=48]="CLC",r[r.SEC=49]="SEC",r[r.SEI=50]="SEI",r[r.CLI=51]="CLI",r[r.CLV=52]="CLV",r[r.SED=53]="SED",r[r.CLD=54]="CLD",r[r.BRK=55]="BRK";var L={0:[o.BRK,l.IMPLIED,7],1:[o.ORA,l.INDIRECT,6],5:[o.ORA,l.ZEROPAGE,3],6:[o.ASL,l.ZEROPAGE,5],8:[o.PHP,l.IMPLIED,3],9:[o.ORA,l.IMMEDIATE,2],10:[o.ASL,l.ACCUMULATOR,2],13:[o.ORA,l.ABSOLUTE,4],14:[o.ASL,l.ABSOLUTE,6],16:[o.BPL,l.RELATIVE,2],17:[o.ORA,l.INDIRECT_Y,5],21:[o.ORA,l.ZEROPAGE_X,4],22:[o.ASL,l.ZEROPAGE_X,6],24:[o.CLC,l.IMPLIED,2],25:[o.ORA,l.ABSOLUTE_Y,4],29:[o.ORA,l.ABSOLUTE_X,4],30:[o.ASL,l.ABSOLUTE_X,7],32:[o.JSR,l.ABSOLUTE,6],33:[o.AND,l.INDIRECT_X,6],36:[o.BIT,l.ZEROPAGE,3],37:[o.AND,l.ZEROPAGE,3],38:[o.ROL,l.ZEROPAGE,5],40:[o.PLP,l.IMPLIED,4],41:[o.AND,l.IMMEDIATE,2],42:[o.ROL,l.ACCUMULATOR,2],44:[o.BIT,l.ABSOLUTE,4],45:[o.AND,l.ABSOLUTE,4],46:[o.ROL,l.ABSOLUTE,6],48:[o.BMI,l.RELATIVE,2],49:[o.AND,l.INDIRECT_Y,5],53:[o.AND,l.ZEROPAGE_X,4],54:[o.ROL,l.ZEROPAGE_X,6],56:[o.SEC,l.IMPLIED,2],57:[o.AND,l.ABSOLUTE_Y,4],61:[o.AND,l.ABSOLUTE_X,4],62:[o.ROL,l.ABSOLUTE_X,7],64:[o.RTI,l.IMPLIED,6],65:[o.EOR,l.INDIRECT_X,6],69:[o.EOR,l.ZEROPAGE,3],70:[o.LSR,l.ZEROPAGE,5],72:[o.PHA,l.IMPLIED,3],73:[o.EOR,l.IMMEDIATE,2],74:[o.LSR,l.ACCUMULATOR,2],76:[o.JMP,l.ABSOLUTE,3],77:[o.EOR,l.ABSOLUTE,4],78:[o.LSR,l.ABSOLUTE,6],80:[o.BVC,l.RELATIVE,2],81:[o.EOR,l.INDIRECT_Y,5],85:[o.EOR,l.ZEROPAGE_X,4],86:[o.LSR,l.ZEROPAGE_X,6],88:[o.CLI,l.IMPLIED,2],89:[o.EOR,l.ABSOLUTE_Y,4],93:[o.EOR,l.ABSOLUTE_X,4],94:[o.LSR,l.ABSOLUTE_X,7],96:[o.RTS,l.IMPLIED,6],97:[o.ADC,l.INDIRECT_X,6],101:[o.ADC,l.ZEROPAGE,3],102:[o.ROR,l.ZEROPAGE,5],104:[o.PLA,l.IMPLIED,4],105:[o.ADC,l.IMMEDIATE,2],106:[o.ROR,l.ACCUMULATOR,2],108:[o.JMP,l.INDIRECT,5],109:[o.ADC,l.ABSOLUTE,4],110:[o.ROR,l.ABSOLUTE,6],112:[o.BVS,l.RELATIVE,2],113:[o.ADC,l.INDIRECT_Y,5],117:[o.ADC,l.ZEROPAGE_X,4],120:[o.SEI,l.IMPLIED,2],121:[o.ADC,l.ABSOLUTE_Y,4],125:[o.ADC,l.ABSOLUTE_X,4],126:[o.ROR,l.ABSOLUTE_X,7],129:[o.STA,l.INDIRECT_X,6],132:[o.STY,l.ZEROPAGE,3],133:[o.STA,l.ZEROPAGE,3],134:[o.STX,l.ZEROPAGE,3],136:[o.DEY,l.IMPLIED,2],138:[o.TXA,l.IMPLIED,2],140:[o.STY,l.ABSOLUTE,4],141:[o.STA,l.ABSOLUTE,4],142:[o.STX,l.ABSOLUTE,4],144:[o.BCC,l.RELATIVE,2],145:[o.STA,l.INDIRECT_Y,6],148:[o.STY,l.ZEROPAGE_X,4],149:[o.STA,l.ZEROPAGE_X,4],150:[o.STX,l.ZEROPAGE_Y,4],152:[o.TYA,l.IMPLIED,2],153:[o.STA,l.ABSOLUTE_Y,5],154:[o.TXS,l.IMPLIED,2],157:[o.STA,l.ABSOLUTE_X,5],160:[o.LDY,l.IMMEDIATE,2],161:[o.LDA,l.INDIRECT_X,6],162:[o.LDX,l.IMMEDIATE,2],164:[o.LDY,l.ZEROPAGE,3],165:[o.LDA,l.ZEROPAGE,3],166:[o.LDX,l.ZEROPAGE,3],168:[o.TAY,l.IMPLIED,2],169:[o.LDA,l.IMMEDIATE,2],170:[o.TAX,l.IMPLIED,2],172:[o.LDY,l.ABSOLUTE,4],173:[o.LDA,l.ABSOLUTE,4],174:[o.LDX,l.ABSOLUTE,4],176:[o.BCS,l.RELATIVE,2],177:[o.LDA,l.INDIRECT_Y,5],180:[o.LDY,l.ZEROPAGE_X,4],181:[o.LDA,l.ZEROPAGE_X,4],182:[o.LDX,l.ZEROPAGE_Y,4],184:[o.CLV,l.IMPLIED,2],185:[o.LDA,l.ABSOLUTE_Y,4],186:[o.TSX,l.IMPLIED,2],188:[o.LDY,l.ABSOLUTE_X,4],189:[o.LDA,l.ABSOLUTE_X,4],190:[o.LDX,l.ABSOLUTE_Y,4],192:[o.CPY,l.IMMEDIATE,2],193:[o.CMP,l.INDIRECT_X,6],196:[o.CPY,l.ZEROPAGE,3],197:[o.CMP,l.ZEROPAGE,3],198:[o.DEC,l.ZEROPAGE,5],200:[o.INY,l.IMPLIED,2],201:[o.CMP,l.IMMEDIATE,2],202:[o.DEX,l.IMPLIED,2],204:[o.CPY,l.ABSOLUTE,4],205:[o.CMP,l.ABSOLUTE,4],206:[o.DEC,l.ABSOLUTE,6],208:[o.BNE,l.RELATIVE,2],209:[o.CMP,l.INDIRECT_Y,5],213:[o.CMP,l.ZEROPAGE_X,4],214:[o.DEC,l.ZEROPAGE_X,6],216:[o.CLD,l.IMPLIED,2],217:[o.CMP,l.ABSOLUTE_Y,4],221:[o.CMP,l.ABSOLUTE_X,4],222:[o.DEC,l.ABSOLUTE_X,7],224:[o.CPX,l.IMMEDIATE,2],225:[o.SBC,l.INDIRECT_X,6],228:[o.CPX,l.ZEROPAGE,3],229:[o.SBC,l.ZEROPAGE,3],230:[o.INC,l.ZEROPAGE,5],232:[o.INX,l.IMPLIED,2],233:[o.SBC,l.IMMEDIATE,2],234:[o.NOP,l.IMPLIED,2],236:[o.CPX,l.ABSOLUTE,4],237:[o.SBC,l.ABSOLUTE,4],238:[o.INC,l.ABSOLUTE,6],240:[o.BEQ,l.RELATIVE,2],241:[o.SBC,l.INDIRECT_Y,5],245:[o.SBC,l.ZEROPAGE_X,4],246:[o.INC,l.ZEROPAGE_X,6],248:[o.SED,l.IMPLIED,2],249:[o.SBC,l.ABSOLUTE_Y,4],253:[o.SBC,l.ABSOLUTE_X,4],254:[o.INC,l.ABSOLUTE_X,7]};function E(e,t){return e&&(t.cycles+=1,t.absoluteAddress=t.pc+t.relativeAddress,(65280&t.absoluteAddress)!=(65280&t.pc)&&(t.cycles+=1),t.pc=t.absoluteAddress),0}var s=(A.prototype.read=function(e){return this.bus.read(e)},A.prototype.readPc=function(){var e=this.read(this.pc);return this.pc+=1,e},A.prototype.write=function(e,t){this.bus.write(e,t)},A.prototype.clock=function(){if(0===this.cycles){this.opcode=this.readPc();var e=L[this.opcode],t=e[0],a=e[1],r=e[2];this.cycles+=r+(function(e,t){switch(e){case l.IMPLIED:case l.ACCUMULATOR:return t.fetched=t.acc,0;case l.IMMEDIATE:return t.absoluteAddress=t.pc,t.pc+=1,0;case l.ZEROPAGE:return t.absoluteAddress=t.readPc(),0;case l.ZEROPAGE_X:return t.absoluteAddress=t.readPc()+t.x,t.absoluteAddress&=255,0;case l.ZEROPAGE_Y:return t.absoluteAddress=t.readPc()+t.y,t.absoluteAddress&=255,0;case l.ABSOLUTE:var a=t.readPc(),r=t.readPc();return t.absoluteAddress=r<<8|a,0;case l.ABSOLUTE_X:return a=t.readPc(),r=t.readPc(),t.absoluteAddress=r<<8|a,t.absoluteAddress+=t.x,(65280&t.absoluteAddress)!=r<<8?1:0;case l.INDIRECT:a=t.readPc();var s=(r=t.readPc())<<8|a,c=255===a;return t.absoluteAddress=t.read(c?65280&s:1+s)<<8|t.read(s),0;case l.INDIRECT_X:var E=t.readPc();return a=t.read(E+t.x&255),r=t.read(E+t.x+1&255),t.absoluteAddress=r<<8|a,0;case l.INDIRECT_Y:return E=t.readPc(),a=t.read(255&E),r=t.read(E+1&255),t.absoluteAddress=r<<8|a,t.absoluteAddress+=t.y,(65280&t.absoluteAddress)!=r<<8?1:0;case l.RELATIVE:var A=t.readPc();return t.relativeAddress=A<128?A:A-256,0}return 0}(a,this)&function(e,t,a){switch(t){case o.NOP:return 0;case o.LDA:return a.acc=a.fetch(),a.setZNFlags(a.acc),1;case o.STA:return a.write(a.absoluteAddress,a.acc),0;case o.LDX:return a.x=a.fetch(),a.setZNFlags(a.x),1;case o.STX:return a.write(a.absoluteAddress,a.x),0;case o.LDY:return a.y=a.fetch(),a.setZNFlags(a.y),1;case o.STY:return a.write(a.absoluteAddress,a.y),0;case o.TAX:return a.x=a.acc,a.setZNFlags(a.acc),0;case o.TAY:return a.y=a.acc,a.setZNFlags(a.y),0;case o.TXA:return a.acc=a.x,a.setZNFlags(a.acc),0;case o.TYA:return a.acc=a.y,a.setZNFlags(a.acc),0;case o.TXS:return a.stackPointer=a.x,0;case o.TSX:return a.x=a.stackPointer,a.setZNFlags(a.x),0;case o.INX:return a.x+=1,a.setZNFlags(a.x),0;case o.INY:return a.y+=1,a.setZNFlags(a.y),0;case o.INC:var r=a.fetch()+1;return a.write(a.absoluteAddress,255&r),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),0;case o.DEX:return--a.x,a.setZNFlags(a.x),0;case o.DEY:return--a.y,a.setZNFlags(a.y),0;case o.DEC:return r=a.fetch()-1,a.write(a.absoluteAddress,255&r),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),0;case o.ORA:return a.acc=a.acc|a.fetch(),a.setZNFlags(a.acc),1;case o.EOR:return a.acc=a.acc^a.fetch(),a.setZNFlags(a.acc),0;case o.AND:return a.fetch(),a.acc=a.acc&a.fetched,a.setZNFlags(a.acc),1;case o.ROL:return r=a.fetch()<<1|a.getFlag(c.CarryBit),a.setFlag(c.CarryBit,65280&r),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),e===l.IMPLIED?a.acc=255&r:a.write(a.absoluteAddress,255&r),0;case o.ROR:return a.fetch(),r=a.getFlag(c.CarryBit)<<7|a.fetched>>1,a.setFlag(c.CarryBit,1&a.fetched),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),e===l.IMPLIED?a.acc=255&r:a.write(a.absoluteAddress,255&r),0;case o.ASL:return r=a.fetch()<<1,a.setFlag(c.CarryBit,0<(65280&r)),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,r&&128),e===l.IMPLIED?a.acc=255&r:a.write(a.absoluteAddress,255&r),0;case o.LSR:return a.fetch(),a.setFlag(c.CarryBit,1&a.fetched),r=a.fetched>>1,a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),e===l.IMPLIED?a.acc=255&r:a.write(a.absoluteAddress,255&r),0;case o.BIT:return a.fetch(),r=a.acc&a.fetched,a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&a.fetched),a.setFlag(c.Overflow,64&a.fetched),0;case o.CMP:return a.fetch(),r=a.acc-a.fetched,a.setFlag(c.CarryBit,a.acc>=a.fetched),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),1;case o.CPX:return a.fetch(),r=a.x-a.fetched,a.setFlag(c.CarryBit,a.x>=a.fetched),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),0;case o.CPY:return a.fetch(),r=a.y-a.fetched,a.setFlag(c.CarryBit,a.y>=a.fetched),a.setFlag(c.Zero,0==(255&r)),a.setFlag(c.Negative,128&r),0;case o.JMP:return a.pc=a.absoluteAddress,0;case o.JSR:return--a.pc,a.write(a.stackHead,a.pc>>8&255),--a.stackPointer,a.write(a.stackHead,255&a.pc),--a.stackPointer,a.pc=a.absoluteAddress,0;case o.BCS:return E(a.getFlag(c.CarryBit),a);case o.BCC:return E(!a.getFlag(c.CarryBit),a);case o.BEQ:return E(a.getFlag(c.Zero),a);case o.BMI:return E(a.getFlag(c.Negative),a);case o.BNE:return E(!a.getFlag(c.Zero),a);case o.BPL:return E(!a.getFlag(c.Negative),a);case o.BVC:return E(!a.getFlag(c.Overflow),a);case o.BVS:return E(a.getFlag(c.Overflow),a);case o.CLC:return a.setFlag(c.CarryBit,!1),0;case o.SEC:return a.setFlag(c.CarryBit,!0),0;case o.CLD:return a.setFlag(c.DecimalMode,!1),0;case o.SED:return a.setFlag(c.DecimalMode,!0),0;case o.SEI:return a.setFlag(c.InterruptsDisable,!0),0;case o.CLI:return a.setFlag(c.InterruptsDisable,!1),0;case o.CLV:return a.setFlag(c.Overflow,!1),0;case o.ADC:a.fetch();var s=a.acc+a.fetched+a.getFlag(c.CarryBit);return a.setFlag(c.CarryBit,255<s),a.setFlag(c.Zero,0==(255&s)),a.setFlag(c.Negative,128&s),a.setFlag(c.Overflow,(~a.acc^a.fetched)&(a.acc^s)&128),a.acc=255&s,1;case o.SBC:return a.fetch(),r=255^a.fetched,s=a.acc+r+a.getFlag(c.CarryBit),a.setFlag(c.CarryBit,65280&s),a.setFlag(c.Zero,0==(255&s)),a.setFlag(c.Overflow,(s^a.acc)&(s^r)&128),a.setFlag(c.Negative,128&s),a.acc=255&s,1;case o.PHA:return a.write(a.stackHead,a.acc),--a.stackPointer,0;case o.PLA:return a.stackPointer+=1,a.acc=a.read(a.stackHead),a.setZNFlags(a.acc),0;case o.PHP:return a.write(a.stackHead,a.flags|c.Break|c.Unused),a.setFlag(c.Break,!1),a.setFlag(c.Unused,!1),--a.stackPointer,0;case o.PLP:return a.stackPointer+=1,a.flags=a.read(a.stackHead),a.setFlag(c.Unused,!0),0;case o.RTI:return a.stackPointer+=1,a.flags=a.read(a.stackHead),a.flags&=~c.Break,a.flags&=~c.Unused,a.stackPointer+=1,a.pc=a.read(a.stackHead),a.stackPointer+=1,a.pc|=a.read(a.stackHead)<<8,0;case o.RTS:return a.stackPointer+=1,a.pc=a.read(a.stackHead),a.stackPointer+=1,a.pc|=a.read(a.stackHead)<<8,a.pc+=1,0;case o.BRK:return a.pc+=1,a.setFlag(c.InterruptsDisable,!0),a.write(a.stackHead,a.pc>>8&255),--a.stackPointer,a.write(a.stackHead,255&a.pc),--a.stackPointer,a.setFlag(c.Break,!0),a.write(a.stackHead,a.flags),--a.stackPointer,a.setFlag(c.Break,!1),a.pc=a.read(65534)|a.read(65535)<<8,0}return 0}(a,t,this))}--this.cycles},Object.defineProperty(A.prototype,"ready",{get:function(){return 0===this.cycles},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"stackHead",{get:function(){return 256+this.stackPointer},enumerable:!0,configurable:!0}),A.prototype.reset=function(){this.acc=0,this.x=0,this.y=0,this.stackPointer=255,this.flags=0&c.Unused,this.absoluteAddress=65532;var e=this.read(this.absoluteAddress),t=this.read(this.absoluteAddress+1);this.pc=t<<8|e,this.relativeAddress=0,this.absoluteAddress=0,this.fetched=0,this.cycles=8},A.prototype.interrupt=function(e){var t=e?65518:65530;this.write(this.stackHead,this.pc>>8&255),--this.stackPointer,this.write(this.stackHead,255&this.pc),--this.stackPointer,this.setFlag(c.Break,!1),this.setFlag(c.Unused,!0),this.setFlag(c.InterruptsDisable,!0),this.write(this.stackHead,this.flags),--this.stackPointer,this.absoluteAddress=t;var a=this.read(this.absoluteAddress),r=this.read(this.absoluteAddress+1);return this.pc=r<<8|a,e?7:8},A.prototype.irq=function(){this.getFlag(c.InterruptsDisable)||(this.cycles=this.interrupt(!0))},A.prototype.nmi=function(){this.cycles=this.interrupt(!1)},A.prototype.setFlag=function(e,t){t?this.flags|=e:this.flags&=~e},A.prototype.setZNFlags=function(e){this.setFlag(c.Zero,0===e),this.setFlag(c.Negative,128&e)},A.prototype.getFlag=function(e){return 0<(this.flags&e)?1:0},A.prototype.fetch=function(){return L[this.opcode][1]!==l.IMPLIED&&(this.fetched=this.read(this.absoluteAddress)),this.fetched},A);function A(e){this.flags=0,this.acc=0,this.x=0,this.y=0,this.stackPointer=0,this.pc=0,this.fetched=0,this.absoluteAddress=0,this.relativeAddress=0,this.opcode=0,this.cycles=0,this.bus=e}var i=(n.prototype.read=function(e,t){return 0<=e&&e<=65535?this.ram[e]:0},n.prototype.write=function(e,t){0<=e&&e<=65535&&(this.ram[e]=t)},n.prototype.reset=function(){this.cpu.reset(),this.clockConter=0},n.prototype.clock=function(){this.cpu.clock(),this.clockConter+=1},n);function n(){this.cpu=new s(this),this.ram=new Uint8Array(65536),this.clockConter=0}function T(e,t,a){return void 0===t&&(t=2),void 0===a&&(a="$"),""+a+e.toString(16).padStart(t,"0")}function d(e){return document.querySelector("#"+e)}function u(){var e;!function(){var e=g[R.cpu.pc],t=[],a=0,r=R.cpu.pc-1;for(O.disasm.innerHTML="";a<=8;){((c=g[r])||r<0)&&(a+=1,t.push(c||"*")),--r}t.reverse().map(function(e){return O.disasm.insertAdjacentHTML("beforeend","<div>"+e+"</div>")}),O.disasm.insertAdjacentHTML("beforeend","<div class='active'>"+e+"</div>");var s=[];for(a=0,r=R.cpu.pc+1;a<=8&&r<R.ram.length;){var c;((c=g[r])||r>=R.ram.length)&&(a+=1,s.push(c||"*")),r+=1}s.map(function(e){return O.disasm.insertAdjacentHTML("beforeend","<div>"+e+"</div>")})}(),e="active",O.c.className=R.cpu.getFlag(c.CarryBit)?e:"",O.z.className=R.cpu.getFlag(c.Zero)?e:"",O.i.className=R.cpu.getFlag(c.InterruptsDisable)?e:"",O.d.className=R.cpu.getFlag(c.DecimalMode)?e:"",O.b.className=R.cpu.getFlag(c.Break)?e:"",O.u.className=R.cpu.getFlag(c.Unused)?e:"",O.v.className=R.cpu.getFlag(c.Overflow)?e:"",O.n.className=R.cpu.getFlag(c.Negative)?e:"",O.pc.innerHTML=T(R.cpu.pc),O.stack.innerHTML=T(R.cpu.stackPointer,4),O.acc.innerHTML=T(R.cpu.acc)+" | "+R.cpu.acc,O.x.innerHTML=T(R.cpu.x)+" | "+R.cpu.x,O.y.innerHTML=T(R.cpu.y)+" | "+R.cpu.y,function(e){for(var t=O.memory.innerHTML="",a=e;a-e<=255;a+=1){var r=T(R.ram[a],2,"");t+=a%16==0?"</div><div>"+T(a,4)+": "+r:" "+r}O.memory.innerHTML=t}(0)}function I(){for(;R.cpu.clock(),!R.cpu.ready;);u()}var P,R=new i,g=[],O={disasm:d("disasm"),c:d("flag-c"),z:d("flag-z"),i:d("flag-i"),d:d("flag-d"),b:d("flag-b"),u:d("flag-u"),v:d("flag-v"),n:d("flag-n"),pc:d("reg-pc"),stack:d("stack"),acc:d("reg-acc"),x:d("reg-x"),y:d("reg-y"),memory:d("memory")};document.body.addEventListener("keyup",function(e){switch(e.key){case"s":I();break;case"r":R.cpu.reset(),I();break;case" ":P=P?(clearInterval(P),0):setInterval(function(){R.clock(),R.cpu.ready&&u()},80)}}),function(){for(var e=[162,10,142,0,0,162,3,142,1,0,172,0,0,169,0,24,109,1,0,136,208,250,141,2,0,234,76,25,128],t=0;t<e.length;t+=1)R.ram[32768+t]=e[t];R.ram[65532]=0,R.ram[65533]=128,g=function(e,t,a){for(var r=0,s=t,c=[];r<a;){r=s;var E=L[e.read(s)];s+=1;var A=E?E[0]:o.BRK,i=void 0;switch(E?E[1]:l.IMPLIED){case l.IMPLIED:i="";break;case l.IMMEDIATE:var n=e.read(s);s+=1,i="#"+T(n)+" {IMM}";break;case l.ZEROPAGE:var d=e.read(s);s+=1,i=T(d)+" {ZP0}";break;case l.ZEROPAGE_X:d=e.read(s);s+=1,i=T(d)+", X {ZPX}";break;case l.ZEROPAGE_Y:d=e.read(s);s+=1,i=T(d)+", Y {ZPY}";break;case l.INDIRECT_X:d=e.read(s);s+=1,i="("+T(d)+", X) {IZX}";break;case l.INDIRECT_Y:d=e.read(s);s+=1,i="("+T(d)+", Y) {IZY}";break;case l.ABSOLUTE:d=e.read(s);s+=1;var u=e.read(s);s+=1,i=T(u<<8|d,4)+" {ABS}";break;case l.ABSOLUTE_X:d=e.read(s);s+=1;u=e.read(s);s+=1,i=T(u<<8|d,4)+",X {ABX}";break;case l.ABSOLUTE_Y:d=e.read(s);s+=1;u=e.read(s);s+=1,i=T(u<<8|d,4)+",Y {ABY}";break;case l.INDIRECT:d=e.read(s);s+=1;u=e.read(s);s+=1,i="("+T(u<<8|d,4)+") {IND}";break;case l.RELATIVE:n=e.read(s);s+=1;var I=n<128?n:n-256;i=T(n)+" ["+T(s+I,4)+"] {REL}"}c[r]=T(r,4)+": "+o[A]+" "+i}return c}(R.cpu,0,R.ram.length)}(),R.reset(),I()}();
